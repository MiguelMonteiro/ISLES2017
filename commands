#!/bin/bash

JOB_NAME=svhn_20

OUTPUT_PATH=logs
DATA_PATH=isles2017.tfrecord

gcloud ml-engine local train \
    --module-name trainer.task \
    --package-path trainer/ \
    --distributed \
    -- \
    --file-path $DATA_PATH \
    --train-steps 2 \
    --job-dir $OUTPUT_PATH



JOB_NAME=isles_running_with_complex_model_m_machines
BUCKET_NAME=mindful-experience-4425
OUTPUT_PATH=gs://$BUCKET_NAME/$JOB_NAME
DATA_PATH=gs://$BUCKET_NAME/data/isles2017.tfrecord


gcloud ml-engine jobs submit training $JOB_NAME \
    --job-dir $OUTPUT_PATH \
    --runtime-version 1.2 \
    --module-name trainer.task \
    --package-path trainer/ \
    --scale-tier CUSTOM \
    --config config.yaml \
    -- \
    --file-path $DATA_PATH \
    --train-steps 50 \
    --verbosity DEBUG

python -m tensorflow.tensorboard --logdir=$OUTPUT_PATH

gsutil cp isles2017.tfrecord gs://mindful-experience-4425/data